<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마이페이지</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link th:href="@{/css/mypage.css}" rel="stylesheet" />
</head>

<body>
    <div class="container">
        <a class="navbar-brand logo_h" th:href="@{/moduDeal/main}">
            <img th:src="@{/img/logo.png}" alt="로고 이미지">
        </a>
        <h3 class="text-center">마이페이지</h3>
        <!-- 아이디와 패스워드 틀 -->
        <div class="form-group">
            <form th:action="@{/moduDeal/mypage}" method="post" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="memberId">아이디</label>
                    <input type="text" id="memberId" name="memberId" class="form-control" th:value="${memberDTO.memberId}" disabled>
                </div>
                <div class="form-group">
                    <label for="password">비밀번호</label>
                    <input type="password" id="password" name="password" class="form-control" maxlength="20" autocomplete="new-password">
                    <input type="password" id="password" name="password" class="form-control" maxlength="20" autocomplete="checkPassword">
                </div>
            </form>
        </div>
        <!-- 이메일 주소와 휴대폰 번호 틀 -->
        <div class="form-group">
            <form th:action="@{/moduDeal/mypage}" method="post" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="email">이메일 주소</label>
                    <input type="email" id="email" name="email" class="form-control" maxlength="100" th:value="${memberDTO.email}">
                </div>
                <div class="form-group">
                    <label for="hp">휴대전화번호</label>
                    <input type="tel" id="hp" name="hp" class="form-control" maxlength="16" th:value="${memberDTO.hp}">
                </div>
            </form>
        </div>
        <!-- 우편번호 틀 -->
        <div class="form-group">
            <form th:action="@{/moduDeal/mypage}" method="post" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="addressZipcode">우편번호</label>
                    <div class="input-group">
                        <input type="text" id="addressZipcode" name="addressZipcode" class="form-control" th:value="${memberDTO.addressZipcode}">
                        <div class="input-group-append">
                            <button type="button" onclick="execDaumPostcode()" class="btn btn-primary">검색</button>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="addressRoad">도로명 주소</label>
                    <input type="text" id="addressRoad" name="addressRoad" class="form-control" th:value="${memberDTO.addressRoad}">
                </div>
                <div class="form-group">
                    <label for="addressJibun">지번 주소</label>
                    <input type="text" id="addressJibun" name="addressJibun" class="form-control" th:value="${memberDTO.addressJibun}">
                </div>
                <div class="form-group">
                    <label for="addressNamuji">나머지 주소</label>
                    <input type="text" id="addressNamuji" name="addressNamuji" class="form-control" th:value="${memberDTO.addressNamuji}">
                </div>
                <button type="submit" class="btn btn-primary btn-block">정보 수정</button>
            </form>
        </div>
    </div>
    <!-- JavaScript로 주소 검색 처리 -->
    <script th:src="@{http://dmaps.daum.net/map_js_init/postcode.v2.js}"></script>
    <!-- jQuery 라이브러리 로드 -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap JS 로드 -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        function execDaumPostcode() {
            new daum.Postcode({
                oncomplete: function(data) {
                    var fullRoadAddr = data.roadAddress; // 도로명 주소 변수
                    var extraRoadAddr = ''; // 도로명 조합형 주소 변수
                    if (data.bname !== '' && /[동|로|가]$/g.test(data.bname)) {
                        extraRoadAddr += data.bname;
                    }
                    if (data.buildingName !== '' && data.apartment === 'Y') {
                        extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                    }
                    if (extraRoadAddr !== '') {
                        extraRoadAddr = ' (' + extraRoadAddr + ')';
                    }
                    if (fullRoadAddr !== '') {
                        fullRoadAddr += extraRoadAddr;
                    }
                    document.getElementById('addressZipcode').value = data.zonecode; //5자리 새우편번호 사용
                    document.getElementById('addressRoad').value = fullRoadAddr;
                    document.getElementById('addressJibun').value = data.jibunAddress;
                }
            }).open();
        }
    </script>
</body>

</html>


